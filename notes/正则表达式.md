```markdown
# 正则表达式
<!-- GFM-TOC -->
* [正则表达式](#正则表达式)
    * [一、概述](#一概述)
    * [二、匹配单个字符](#二匹配单个字符)
    * [三、匹配一组字符](#三匹配一组字符)
    * [四、使用元字符](#四使用元字符)
    * [五、重复匹配](#五重复匹配)
    * [六、位置匹配](#六位置匹配)
    * [七、使用子表达式](#七使用子表达式)
    * [八、回溯引用](#八回溯引用)
    * [九、前后查找](#九前后查找)
    * [十、嵌入条件](#十嵌入条件)
    * [参考资料](#参考资料)
<!-- GFM-TOC -->


## 一、概述

正则表达式（Regular Expressions，简称Regex）是一种用于文本内容查找、匹配和替换的强大工具。它们广泛应用于编程语言、文本编辑器和搜索工具中，能够有效地处理和分析文本数据。

正则表达式并不是一种独立的编程语言，而是作为其他编程语言或软件产品中的文本处理功能的组成部分存在。如果您想快速创建和测试正则表达式，可以访问 [正则表达式在线工具](https://regexr.com/)。

## 二、匹配单个字符

**`.`**：元字符，匹配任何单个字符（通常不匹配换行符）。

要匹配字面上的句点字符`.`，需要使用反斜杠进行转义，写作 `\.`。

正则表达式区分大小写，除非指定不区分。

**正则表达式示例**  

```
C.C2018
```

**匹配结果**  

"My name is **CyC2018**."

## 三、匹配一组字符

**`[ ]`**：定义一个字符集合。字符集合内可以定义单个字符或字符区间，例如`0-9`和`a-z`。

- **`-`**：只在字符集合中是元字符，用于表示字符范围，其他地方则视为普通字符。
- **`^`**：在字符集合中表示取反。

**应用示例**  

匹配以`abc`开头，且最后一个字符不是数字的字符串：

**正则表达式**  

```
abc[^0-9]
```

**匹配结果**  

1. **abcd** （匹配）
2. **abc1** （不匹配）
3. **abc2** （不匹配）

## 四、使用元字符

### 匹配空白字符

|  元字符 | 说明  |
| :---: | :---: |
|  `\b` | 匹配字边界 |
|  `\f` | 匹配换页符 |
|  `\n` | 匹配换行符 |
|  `\r` | 匹配回车符 |
|  `\t` | 匹配制表符 |
|  `\v` | 匹配垂直制表符 |

在Windows系统中，行结束方式为`\r\n`；而在Unix/Linux系统则为`\n`。因此`\r\n\r\n`匹配Windows下的空行。

### 匹配特定的字符

#### 1. 数字元字符

|  元字符 | 说明  |
| :---: | :---: |
| `\d` | 匹配任何数字字符，等价于`[0-9]` |
| `\D` | 匹配任何非数字字符，等价于`[^0-9]` |

#### 2. 字母数字元字符

|  元字符 | 说明  |
| :---: | :---: |
| `\w` | 匹配任何字母、数字或下划线，等价于`[a-zA-Z0-9_]` |
| `\W` | 匹配任何非字母数字字符 |

#### 3. 空白字符元字符

| 元字符  | 说明  |
| :---: | :---: |
| `\s` | 匹配任何空白字符，等价于`[\f\n\r\t\v]` |
| `\S` | 匹配任何非空白字符 |

此外，`\x`可以匹配十六进制字符，`\0`可以匹配八进制字符，例如`\xA`对应ASCII值为10的换行符`\n`。

## 五、重复匹配

以下元字符用于控制字符出现的次数：

- **`+`**：匹配一个或多个字符
- **`*`**：匹配零个或多个字符
- **`?`**：匹配零个或一个字符

**应用示例**  

匹配邮箱地址的正则表达式：

**正则表达式**  

```
[\w.]+@\w+\.\w+
```

在这个表达式中，`[\w.]`匹配字母、数字或`.`，加上`+`表示可以匹配一个或多个任意字符。

**匹配结果**  

匹配邮箱 **abc.def@qq.com**。

同时，特殊的重复次数可以通过 `{n}`、`{m,n}` 和 `{m,}` 来指定。  
- `{n}`：匹配恰好n个字符。  
- `{m,n}`：匹配m到n个字符。  
- `{m,}`：至少匹配m个字符。

`*`和`+`是贪婪匹配的，意味着它们会尽可能匹配尽量多的内容。可以在它们后面加上`?`，使其变为非贪婪模式，例如`*?`、`+?`和`{m,n}?`。

### 贪婪和懒惰匹配示例

**正则表达式**  

```
a.+c
```

**匹配结果**  

在字符串 **abcabcabc** 中，`.+`会贪婪地匹配尽可能多的字符，导致整个字符串都被匹配。若希望只匹配前面的部分可以使用非贪婪模式。

## 六、位置匹配

### 单词边界

**`\b`**：匹配一个单词的边界，而` \B`则匹配非单词边界。需要注意的是，`\b`只匹配位置，并不匹配字符本身。  

例如，`\babc\b`匹配字符串 "abc"，而其前后没有任何字母或数字。

### 字符串边界

**`^`**：匹配字符串的开头，**`$`**：匹配字符串的结尾。  
在字符集合外部的`^`和`$`是用作匹配整个字符串的开头和结尾的。

例如，使用以下正则表达式来匹配代码中的以`//` 开头的注释行：

**正则表达式**  

```
^\s*//.*$
```

**匹配结果**  

1. `public void fun() {`
2. `    // 注释 1`
3. `    int a = 1;`
4. `    int b = 2;`
5. `    // 注释 2`
6. `    int c = a + b;`
7. `}`

## 七、使用子表达式

使用 **`( )`** 定义子表达式，子表达式内的内容可以作为一个整体进行匹配，可以与元字符组合使用，甚至可以进行嵌套。

**正则表达式示例**  

```
(ab){2,}
```

**匹配结果**  

**ababab**（此表达式匹配两个以上的"ab"。）

**|**：表示或的元字符，它可以用于分隔两个完全独立的部分，只需满足其中之一即为成功匹配。

**正则表达式示例**  

```
(19|20)\d{2}
```

**匹配结果**  

1. **1900**
2. **2010**
3. **1020**

## 八、回溯引用

回溯引用使用 **`\n`** 引用之前的子表达式，其中`n`为子表达式的序号（从1开始），匹配的内容需一致。

**应用示例**  

匹配HTML中合法的标题元素，如`<h1>`至`<h6>`的标签。

**正则表达式**  

```
<(h[1-6])>\w*?<\/\1>
```

**匹配结果**  

1. **<h1>x</h1>**
2. **<h2>x</h2>**
3. <h3>x</h1>

### 替换操作

对于替换功能，需要用到两个正则表达式。

**应用示例**  

修改电话号码格式，将 `313-555-1234` 转换为 `(313) 555-1234`。

**查找正则表达式**  

```
(\d{3})(-)(\d{3})(-)(\d{4})
```

**替换正则表达式**  

```
($1) $3-$5
```

**结果**  

`(313) 555-1234`

### 大小写转换

|  元字符 | 说明  |
| :---: | :---: |
|  `\l` | 将下个字符转换为小写 |
|   `\u` | 将下个字符转换为大写 |
|  `\L` | 将`\L`和`\E`之间的所有字符转换为小写 |
|  `\U` | 将`\U`和`\E`之间的所有字符转换为大写 |
|  `\E` | 结束`\L` 或`\U` |

**应用示例**  

将字符串 `"abcd"`的第二和第三个字符转换为大写。

**查找正则表达式**  

```
(\w)(\w{2})(\w)
```

**替换正则表达式**  
```
$1\U$2\E$3
```

**结果**  

`aBCd`

## 九、前后查找

前后查找（Lookaround）用于限定匹配的内容的上下文，而不将这些上下文包括在最终匹配的内容中。

### 向前查找

向前查找使用 **`(?=)`** 定义，表示后边需要匹配的内容，称为“前向查找”。

**正则表达式示例**  

查找邮箱地址中`@`前面的部分：

```
\w+(?=@)
```

**匹配结果**  

**abc** @qq.com

### 向后查找

向后查找使用 **`(?<=)`** 定义，而JavaScript并不支持向后查找。在许多情况下，向后查找可以用于验证特定条件下的匹配。

## 十、嵌入条件

### 回溯引用条件

在特定情况下，条件判断一个子表达式是否匹配。如果匹配则继续执行。此外，可以根据条件选择是否执行下一步匹配。

**正则表达式示例**  

```
(\()?abc(?(1)\))
```

**结果**  

1. **(abc)**  
2. **abc**  
3. (abc  （只匹配不带括号的部分）

### 前后查找条件

结合了首尾限制的条件匹配，只有在特定条件符合的情况下继续进行后续匹配。

**正则表达式示例**  

```
\d{5}(?(?=-)-\d{4})
```

**结果**  

1. **11111**  
2. **22222-**  
3. **33333-4444**

在实际应用中，正则表达式是一种灵活且强大的工具，但需谨慎使用，以避免过于复杂的表达式导致调试困难。

## 参考资料

- Ben Forta. *正则表达式必知必会* [M]. 人民邮电出版社, 2007.
```
