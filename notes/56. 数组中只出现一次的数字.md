# 56. 数组中只出现一次的数字

## 题目链接

[牛客网](https://www.nowcoder.com/practice/389fc1c3d3be4479a154f63f495abff8?tpId=13&tqId=11193&tab=answerKey&from=cyc_github)

## 题目描述

给定一个整型数组，其中除了两个数字以外，其他数字都出现了两次。请你找出这两个只出现一次的数字。

## 解题思路

为了高效解决此问题，我们可以使用异或运算的特性。异或运算的一些关键特点包括：

1. 两个相同的数字异或的结果为0：`x ^ x = 0`
2. 任何数字与0异或的结果仍然是该数字：`0 ^ x = x`
3. 异或运算具有交换和结合律：`x ^ y = y ^ x` 和 `(x ^ y) ^ z = x ^ (y ^ z)`

基于这些特性，我们首先对数组中的所有元素进行异或操作，最终结果将是那两个只出现一次的数字的异或结果。

例如，考虑数组 `[x, x, y, y, z, k]`：
- `x ^ x ^ y ^ y ^ z ^ k = 0 ^ z ^ k = z ^ k`

设最终的异或结果为 `diff = z ^ k`，我们可以观察到 `diff` 一定不为0，因为 z 和 k 不相等。

### 获取区分位

由于 z 和 k 在位级表示上必有不同，因此我们可以通过位运算找到 `diff` 中任一位为1的位置，以便明确区分这两个数字。我们使用 `diff & -diff` 来获取 `diff` 最右侧的1所对应的位，该操作可以帮助我们得到分标的依据。

接下来，我们遍历数组，将每一个元素与 `diff` 进行异或：
- 如果某个元素与 `diff` 的异或结果为0，则该元素与 z 同属一类，参与到 z 的异或中。
- 如果非0，则该元素与 k 同属一类，参与到 k 的异或中。

通过这种方式，最终我们将得到两个只出现一次的数字。

## 代码实现

下面是用 Java 语言实现的解决方案：

```java
public class Solution {
    public int[] FindNumsAppearOnce(int[] nums) {
        int[] res = new int[2]; // 用于存储两个只出现一次的数字
        int diff = 0;

        // Step 1: 计算所有数字的异或结果
        for (int num : nums) {
            diff ^= num; // diff 现在是 z ^ k
        }

        // Step 2: 获取 diff 最右侧的1
        diff &= -diff;

        // Step 3: 分类并找到 z 和 k
        for (int num : nums) {
            if ((num & diff) == 0) {
                res[0] ^= num; // 属于第一类
            } else {
                res[1] ^= num; // 属于第二类
            }
        }

        // 确保返回的结果按从小到大排列
        if (res[0] > res[1]) {
            swap(res);
        }
        return res;
    }

    // 辅助方法：交换数组中的两个元素
    private void swap(int[] nums) {
        int temp = nums[0];
        nums[0] = nums[1];
        nums[1] = temp;
    }
}
```

### 代码解析

1. **初始化**：我们首先创建一个大小为2的数组 `res` 来存储结果。
2. **异或计算**：通过循环遍历数组，将所有数字进行异或运算，最终得到 `diff`。
3. **区分位提取**：使用 `diff & -diff` 获取 `diff` 中最后一个为1的位，以便进行后续的分类。
4. **分类异或**：再通过一次遍历，将数字分类到 `res[0]` 或 `res[1]`，直到最终得出两个只出现一次的数字。

此解法的时间复杂度为 O(n)，空间复杂度为 O(1)。通过这种高效的方法，我们能够快速找出数组中唯一出现的两个数字。